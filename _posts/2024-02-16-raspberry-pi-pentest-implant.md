## Raspberry Pi Penetration Testing Implant

![Stock Pi4 Placeholder](https://soldered.com/productdata/2019/09/dsc01864_2.jpg)

This will be the blog post for my pentest implant device that I used on a recent personal project. Do not need GUI for this to work, so long as the WiFi and configs are preset properly.

---

### Hardware, Software, and Accounts Used

This section will list the Hardware and Software that I used while creating and configuring my pentest dropbox.

#### Hardware

* <a href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/"> Raspberry Pi 4 8GB </a> - This is the actual pentest dropbox that will be planted on-site.
* Remote Attack Box - This is the machine that you will use to connect to the Raspberry Pi once the dropbox has been placed on-site. Windows or Linux can work for this purpose; I opted for another Kali machine as my Attack Box
* Micro-HDMI cable and monitor - Used for initial Raspberry Pi setup

#### Software

* <a href="https://www.kali.org/docs/arm/raspberry-pi-4/"> Kali Linux for the Pi4 </a> - Other distros could be used, depending on your tools needs and applicaitons. Kali is used here as the standard all-around pentesting distro.

#### Other Requirements

* <a href="https://aws.amazon.com/ec2/"> AWS EC2 </a> -  free tier will be sufficient for this application

---

### **Phase 1**: Connecting the Raspberry Pi to target WiFi automatically on system startup

Successful completion of this phase relies on effective reconnaissance to determine the SSID and Password of the target WiFi network. This can be gathered via social engineering, password cracking, or other such methods. But the SSID and Password are **hardcoded** into these config files, so they are 100% necessary before you are able to move on to connecting the Pi to the target location.

**Step 1:** Create the new ```wpa_supplicant.conf``` file and place it in the correct directory.

Log into Kali on the Pi (default username:password are kali:kali). Open a Terminal and run ```sudo su``` to become root.

Run the command ```touch wpa_supplicant.conf``` to create a new file. Edit the new config file to read:

```
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
country=US
update_config=1
network=
{
                   ssid=”SSID_NAME”
                   psk=”Wifi_Password”
}
```

**Note:** Replace "SSID_NAME" and "Wifi_Password" with the SSID and Password of your target WiFi network that you learned through your reconnaissance phase.

Once the ```wpa_supplicant.conf``` file has been created run ```mv ./wpa_supplicant.conf /etc/wpa_supplicant/wpa_supplicant.conf``` to place it in the correct directory location.

**Step 2:** Edit the network interfaces file.

Navigate to ```/etc/network``` and edit the ```interfaces``` file. Edit it to include:

```
source-directory /etc/network/interfaces.d
auto lo
iface lo inet loopback
auto wlan0
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
wireless-power off
iface default inet dhcp
```

**Step 3:** Testing.

Edit the ```wpa_supplicant.conf``` SSID and Password to reflect your home network. If your Pi was already connected to your WiFi, forget the connection. Restart the Pi and observe its startup. The Pi should successfully boot and connect to your WiFi network.

For now, keep the ```wpa_supplicant.conf``` file as your home network for further testing during tool creation. _Just remember to edit the file to reflect the target WiFi before your audit or engagement._
---

### **Phase 2**: Setting up the Amazon EC2 as an OpenVPN connection server and creating connection files

**Step 1:** Lorem ipsum

Lorem ipsum

**Step 2:** Lorem ipsum

Lorem ipsum

---

### **Phase 3 (Optional)**: Configuring RDP for GUI Access to Dropbox

**Step 1:** Lorem ipsum

Lorem ipsum

**Step 2:** Lorem ipsum

Lorem ipsum

---

### **Phase 4 (Optional)**: Lorem ipsum 

**Step 1:** Lorem ipsum

Lorem ipsum

**Step 2:** Lorem ipsum

Lorem ipsum

---

### **Future Efforts**

This section will list where I think I can improve on this efort for future iterations.

#### Configure as a WiFi Access Point for other pentest tools

Purpose/use: Don't want to connect so many devices to the target network. Just plant Pi Dropbox and then connect everything else to that dropbox.

ConOps.

#### Future Effort 2

Purpose/use: Lorem ipsum

Lorem ipsum

---

#### Bash Commands Tester

```bash
wget https://git.io/vpn -O openvpn-install.sh
chmod +x ./openvpn-install.sh
./openvpn-install.sh

scp -i cloud_server_key ubuntu@cloud_server_hostname:~/raspberry_box.ovpn ./
scp -i cloud_server_key ubuntu@cloud_server_hostname:~/attack_box.ovpn ./

openvpn raspberry_box.ovpn
openvpn attack_box.ovpn

cp ./raspberry_box.ovpn /etc/openvpn/openvpn.conf
systemctl enable openvpn
```

#### Config File Edit Test

```bash
This is a tester for a config file from CLI.
```

#### Text File Tester

```txt
This is a tester for a text file edit, with no code highlighting.
```
